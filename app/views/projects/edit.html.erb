<div class="task-list">
  <%= @project.project_name %>
  <%= form_with model: @project, local: true do |f| %>
  <%= render "shared/error_messages", resource: @project %>
  <table class="table table-hover">
    <tr>
      <th>タスク</th>
      <th>内容</th>
      <th>開始予定</th>
      <th>終了予定</th>
      <th>補足</th>
      <th>ステータス</th>
    </tr>
    <% @tasks.each do |task| %>
      <tr>
        <td rowspan= "<%= task.things.count %>" ><%= f.text_field :task_name, value:task.task_name %></td>
          <% task.things.each do |thing| %>
          <%= f.fields_for :task do |tf| %>
            <td><%= tf.text_field :thing_name, value: thing.thing_name %></td>
          <%= tf.fields_for :thing do |thf| %>
            <td><%= thf.time_field :start_time, value: thing.start_time.strftime("%H:%M") %></td>
            <td><%= thf.time_field :end_time, value: thing.end_time.strftime("%H:%M") %></td>
            <td><%= thf.text_field :memo, value:thing.memo%></td>
            <td><%= thf.collection_select(:status_id, TaskStatus.all, :id, :name, {include_blank: true, selected: thing.status_id} , {class:"select-box", id:"item-sales-status"}) %></td>
            <% end %>
            <% end %>
      </tr>
      <% end %>

    <% end %>
  </table>
    <%= f.submit "変更" ,class:"sell-btn" %>
    <%# <%= link_to "タスクを編集", project_path, data: {turbo_method: :delete}, class:"item-destroy" %>
    <%= link_to "プロジェクトを削除", project_path, data: {turbo_method: :delete}, class:"item-destroy" %>
  <% end %>
</div> 